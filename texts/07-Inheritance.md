## Наследование

### Понятие наследования

При большом количестве никак не связанных классов в программе, управлять ими становится практически невозможным (так же, как и большим количеством функций в большом проекте). Наследование позволяет справиться с этой проблемой путем упорядочивания и ранжирования классов, то есть объединения общих для нескольких классов свойств в одном классе и использования его в качестве базового.

**Наследование** - механизм передачи свойств одних классов другим классам в процессе проектирования иерархии классов. Исходные классы называют **базовыми(БК) (родителями)**, вторые - **производными (ПК) (потомками)**.

Наследование может быть **одиночным** и **множественным**, в зависимости от числа непосредственных родителей у конкретного класса.

Классы, находящиеся ближе к началу иерархии, объединяют в себе наиболее общие черты для всех нижележащих классов. По мере продвижения вниз по иерархии классы приобретают все больше конкретных черт. Множественное наследование позволяет одному классу обладать свойствами двух и более родительских классов.


## Дерево наследования

Для удобного изображения отношений классов при наследовании строят специальный граф: **дерево наследования**:

![](img/avto.png | width=100)
Рисунок 1. Дерево наследования

Базовые классы изображают над производными.


### Пример с наследованием

```cpp
class Box    // тип ``коробка``
{
  protected:
    int width,height;
  public:
    void SetWidth(int w)  { 
       width=w;  
    }
    void SetHeight(int h) { 
       height=h; 
    }
};
class ColoredBox : public Box  // ``цветная коробка``
{
   int color;
 public:
   void SetColor(int c)  { 
      color=c; 
   }
};
```

### Ключи наследования

При описании производного класса в его заголовке перечисляются все базовые для него классы. Доступ к элементам этих классов регулируется с помощью ключей доступа: `private`, `protected` и `public`. Если базовых классов несколько, они перечисляются через запятую.

Использование ключей доступа вместе с разделами внутри БК позволяет сформировать правило, по которому будет осуществляться доступ к членам ПК.


|  Ключ доступа     | Раздел БК | Раздел ПК |
|-------------------|-----------|-----------|
| private           | private   | нет       |
| private           | protected | private   |
| private           | public    | private   |
| protected         | private   | нет       |
| protected         | protected | protected |
| protected         | public    | protected |
| public            | private   | нет       |
| public            | protected | protected |
| public            | public    | public    |


Из таблицы следует, что если, например, в БК некоторая переменная располагалась в разделе public, а ПК был объявлен с ключом private, то в ПК к данной переменной можно будет обращаться только членам ПК или его друзьям (эта переменная перейдет в раздел private ПК).
Когда происходит наследование без явного указания спецификатора, все имена базового класса в производном классе автоматически становятся приватными (или можно указать private).

Если наследовать с ключевым словом public - все общедоступные имена базового класса будут общедоступными в производном классе и все защищенные имена будут защищенными в производном классе.

## Правила наследования

Нельзя наследовать

- конструкторы
- деструкторы
- перегруженные new
- перегруженные =
- отношения дружественности

Правила для специальных методов

- Поскольку конструкторы не наследуются, ПК должен иметь собственные конструкторы.
- Если в конструкторе производного класса явный вызов конструктора базового класса отсутствует, автоматически вызывается конструктор БК.
- Для иерархии, состоящей из нескольких классов, конструкторы БК вызываются начиная с самого верхнего уровня. После этого выполняются конструкторы элементов класса, являющихся объектами, а затем - конструктор класса.
- В случае нескольких БК их конструкторы вызываются в порядке объявления.
- Для деструкторов эти правила справедливы, но порядок вызова обратный - сначала ПК, затем БК. Не требуется явно вызывать деструкторы, поскольку они будут вызваны автоматически.


